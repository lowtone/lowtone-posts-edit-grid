// Generated by CoffeeScript 1.5.0
(function() {
  var denominators, numerators, tinymce;

  tinymce = this.tinymce;

  numerators = ["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen"];

  denominators = ["whole", "half", "third", "fourth", "fifth", "sixth", "seventh", "eighth", "ninth", "tenth", "eleventh", "twelfth", "thirteenth", "fourteenth", "fifteenth", "sixteenth"];

  tinymce.create('tinymce.plugins.LowtonePostsEditGrid', {
    init: function(d, e) {},
    createControl: function(d, e) {
      var a, ed;
      ed = tinymce.activeEditor;
      switch (d) {
        case 'lowtone_posts_edit_grid_shortcodes':
          d = e.createMenuButton('lowtone_posts_edit_grid_shortcodes', {
            title: ed.getLang('lowtone_posts_edit_grid.insert'),
            icons: false
          });
          a = this;
          d.onRenderMenu.add(function(c, b) {
            var denominator, i, j, key, numerator, target, title, ucfirst, width, widths, _i, _j, _len;
            widths = [];
            ucfirst = function(str) {
              return str[0].toUpperCase() + str.substr(1).toLowerCase();
            };
            for (i = _i = 0, _len = denominators.length; _i < _len; i = ++_i) {
              denominator = denominators[i];
              target = b;
              if (++i > 2) {
                target = b.addMenu({
                  title: ed.getLang("lowtone_posts_edit_grid." + denominator + "s")
                });
              }
              for (j = _j = 1; 1 <= i ? _j <= i : _j >= i; j = 1 <= i ? ++_j : --_j) {
                width = j / i;
                if (widths.indexOf(width) > -1) {
                  continue;
                }
                numerator = numerators[j - 1];
                denominator = denominators[i - 1];
                if (j > 1) {
                  denominator += 's';
                }
                title = ucfirst("" + (ed.getLang("lowtone_posts_edit_grid." + numerator)) + " " + (ed.getLang("lowtone_posts_edit_grid." + denominator)));
                key = "" + numerator + "-" + denominator;
                a.addImmediate(target, title, "[" + key + "][/" + key + "]");
                widths.push(width);
              }
            }
            b.addSeparator();
            return a.addImmediate(b, ed.getLang('lowtone_posts_edit_grid.clear'), '[clear]');
          });
          return d;
      }
      return null;
    },
    addImmediate: function(d, e, a) {
      return d.add({
        title: e,
        onclick: function() {
          return tinyMCE.activeEditor.execCommand('mceInsertContent', false, a);
        }
      });
    }
  });

  tinymce.PluginManager.add('LowtonePostsEditGrid', tinymce.plugins.LowtonePostsEditGrid);

}).call(this);
